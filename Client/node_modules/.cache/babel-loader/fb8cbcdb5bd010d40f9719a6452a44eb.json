{"ast":null,"code":"var _jsxFileName = \"C:\\\\Ammar\\\\REACT PROJECT\\\\ielts-test\\\\src\\\\App.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Auth } from 'firebase/auth';\nimport Home from './components/Home';\nimport firebase from 'firebase/compat/app';\nimport auth from \"firebase/compat/auth\";\nimport firebaseConfig from './config/firebase-config';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, GoogleAuthProvider, onAuthStateChanged, signInWithPopup } from 'firebase/auth';\nimport app from './config/firebase-config';\nfunction App() {\n  const [auth, setAuth] = useState(false || window.localStorage.getItem(\"auth\") == 'true');\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState('');\n  useEffect(() => {\n    // Listen for changes in authentication state\n    const auth = getAuth();\n    const unsubscribe = onAuthStateChanged(auth, userCred => {\n      if (userCred) {\n        setAuth(true);\n        window.localStorage.setItem(\"auth\", \"true\");\n        userCred.getIdToken().then(token => {\n          setToken(token);\n        });\n      } else {\n        setUser(null);\n      }\n    });\n    return () => unsubscribe();\n  }, []);\n  const loginWithGoogle = () => {\n    const auth = getAuth(app);\n    const provider = new GoogleAuthProvider();\n    signInWithPopup(auth, provider).then(userCred => {\n      setAuth(true);\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, auth ? /*#__PURE__*/React.createElement(Home, {\n    token: token,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(\"button\", {\n    onClick: loginWithGoogle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, \"Login with Google\"));\n}\nexport default App;","map":{"version":3,"names":["React","useEffect","useState","Auth","Home","firebase","auth","firebaseConfig","initializeApp","getAuth","GoogleAuthProvider","onAuthStateChanged","signInWithPopup","app","App","setAuth","window","localStorage","getItem","user","setUser","token","setToken","unsubscribe","userCred","setItem","getIdToken","then","loginWithGoogle","provider","catch","error","console","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick"],"sources":["C:/Ammar/REACT PROJECT/ielts-test/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nimport { Auth } from 'firebase/auth';\n\nimport Home from './components/Home';\nimport firebase from 'firebase/compat/app';\nimport auth from  \"firebase/compat/auth\";\nimport firebaseConfig from './config/firebase-config';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, GoogleAuthProvider, onAuthStateChanged, signInWithPopup } from 'firebase/auth';\nimport app from './config/firebase-config';\n\n\n\n\n\nfunction App () {\n\n\n  const [auth, setAuth] = useState(false || window.localStorage.getItem(\"auth\")== 'true');\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState('');\n\n  useEffect(() => {\n    // Listen for changes in authentication state\n    const auth = getAuth();\n    const unsubscribe = onAuthStateChanged(auth, (userCred) => {\n      if (userCred) {\n        setAuth(true);\n        window.localStorage.setItem(\"auth\", \"true\")\n        userCred.getIdToken().then((token) => {\n          setToken(token)\n        })\n      } else {\n        setUser(null);\n      }\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const loginWithGoogle = () => {\n    const auth = getAuth(app);\n    const provider = new GoogleAuthProvider();\n    \n    signInWithPopup(auth, provider)\n      .then((userCred) => {\n          setAuth(true)\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  }\n\n  return (\n    <div>\n      {auth ? (\n        <Home token={token}/>\n      ) : (\n        <button onClick={loginWithGoogle}>Login with Google</button>\n      )\n\n      }\n    </div>\n  )\n}\n\nexport default App;"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAElD,SAASC,IAAI,QAAQ,eAAe;AAEpC,OAAOC,IAAI,MAAM,mBAAmB;AACpC,OAAOC,QAAQ,MAAM,qBAAqB;AAC1C,OAAOC,IAAI,MAAO,sBAAsB;AACxC,OAAOC,cAAc,MAAM,0BAA0B;AACrD,SAASC,aAAa,QAAQ,cAAc;AAC5C,SAASC,OAAO,EAAEC,kBAAkB,EAAEC,kBAAkB,EAAEC,eAAe,QAAQ,eAAe;AAChG,OAAOC,GAAG,MAAM,0BAA0B;AAM1C,SAASC,GAAGA,CAAA,EAAI;EAGd,MAAM,CAACR,IAAI,EAAES,OAAO,CAAC,GAAGb,QAAQ,CAAC,KAAK,IAAIc,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAG,MAAM,CAAC;EACvF,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACmB,KAAK,EAAEC,QAAQ,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EAEtCD,SAAS,CAAC,MAAM;IACd;IACA,MAAMK,IAAI,GAAGG,OAAO,CAAC,CAAC;IACtB,MAAMc,WAAW,GAAGZ,kBAAkB,CAACL,IAAI,EAAGkB,QAAQ,IAAK;MACzD,IAAIA,QAAQ,EAAE;QACZT,OAAO,CAAC,IAAI,CAAC;QACbC,MAAM,CAACC,YAAY,CAACQ,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC;QAC3CD,QAAQ,CAACE,UAAU,CAAC,CAAC,CAACC,IAAI,CAAEN,KAAK,IAAK;UACpCC,QAAQ,CAACD,KAAK,CAAC;QACjB,CAAC,CAAC;MACJ,CAAC,MAAM;QACLD,OAAO,CAAC,IAAI,CAAC;MACf;IACF,CAAC,CAAC;IAEF,OAAO,MAAMG,WAAW,CAAC,CAAC;EAC5B,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMK,eAAe,GAAGA,CAAA,KAAM;IAC5B,MAAMtB,IAAI,GAAGG,OAAO,CAACI,GAAG,CAAC;IACzB,MAAMgB,QAAQ,GAAG,IAAInB,kBAAkB,CAAC,CAAC;IAEzCE,eAAe,CAACN,IAAI,EAAEuB,QAAQ,CAAC,CAC5BF,IAAI,CAAEH,QAAQ,IAAK;MAChBT,OAAO,CAAC,IAAI,CAAC;IACjB,CAAC,CAAC,CACDe,KAAK,CAAEC,KAAK,IAAK;MAChBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACtB,CAAC,CAAC;EACN,CAAC;EAED,oBACE/B,KAAA,CAAAiC,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACGjC,IAAI,gBACHN,KAAA,CAAAiC,aAAA,CAAC7B,IAAI;IAACiB,KAAK,EAAEA,KAAM;IAAAa,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAC,CAAC,gBAErBvC,KAAA,CAAAiC,aAAA;IAAQO,OAAO,EAAEZ,eAAgB;IAAAM,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,mBAAyB,CAI1D,CAAC;AAEV;AAEA,eAAezB,GAAG"},"metadata":{},"sourceType":"module"}